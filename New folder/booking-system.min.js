class BookingSystem{constructor(){this.availableSlots=this.generateSlots(),this.bookings=this.loadBookings(),this.init()}init(){this.setupBookingListeners(),this.updateBookingDisplay()}generateSlots(){const t=[];for(let e=0;e<7;e++){const a=new Date;a.setDate(a.getDate()+e);for(let l=8;l<22;l++)Math.random()>.3&&t.push({id:`slot_${e}_${l}`,date:a.toDateString(),time:`${l}:00 - ${l+1}:00`,datetime:a,available:!0,tutor:this.getRandomTutor()})}return t}getRandomTutor(){const t=['Fatima S.','Khalid M.','Ahmed Y.','Mona R.'];return t[Math.floor(Math.random()*t.length)]}setupBookingListeners(){document.addEventListener('click',(t=>{t.target.classList.contains('book-slot')&&this.showBookingModal(t.target.dataset.slotId)}))}showBookingModal(t){const e=this.availableSlots.find((e=>e.id===t));if(e){document.body.insertAdjacentHTML('beforeend',`<div class="booking-modal active" id="bookingModal"><div class="modal-content"><h3>Book Your Lesson</h3><div class="slot-info"><p><strong>Date:</strong> ${e.date}</p><p><strong>Time:</strong> ${e.time}</p><p><strong>Tutor:</strong> ${e.tutor}</p></div><form id="bookingForm"><input type="text" name="name" placeholder="Full Name" required><input type="email" name="email" placeholder="Email" required><input type="tel" name="phone" placeholder="Phone" required><textarea name="goals" placeholder="Learning Goals" rows="3"></textarea><button type="submit" class="btn btn-primary">Confirm Booking</button></form></div></div>`),document.getElementById('bookingForm').addEventListener('submit',(a=>{a.preventDefault(),this.confirmBooking(t,new FormData(a.target))}))}}confirmBooking(t,e){const a={id:'booking_'+Date.now(),slotId:t,studentName:e.get('name'),studentEmail:e.get('email'),studentPhone:e.get('phone'),goals:e.get('goals'),bookedAt:(new Date).toISOString(),status:'confirmed'};this.bookings.push(a),this.saveBookings();const l=this.availableSlots.find((e=>e.id===t));l&&(l.available=!1),this.showConfirmation(a),this.closeModal()}showConfirmation(t){alert(`âœ… Booking confirmed! We've sent details to ${t.studentEmail}`),window.analytics&&window.analytics.trackConversion('lesson_booking',1)}closeModal(){document.getElementById('bookingModal')?.remove()}saveBookings(){localStorage.setItem('ara_bookings',JSON.stringify(this.bookings))}loadBookings(){return JSON.parse(localStorage.getItem('ara_bookings')||'[]')}updateBookingDisplay(){const t=document.getElementById('availableSlots');if(t){const e=this.availableSlots.filter((t=>t.available));t.innerHTML=e.map((t=>`<div class="time-slot"><span>${t.date} - ${t.time}</span><span>Tutor: ${t.tutor}</span><button class="btn book-slot" data-slot-id="${t.id}">Book</button></div>`)).join('')}}}"undefined"!=typeof window&&(window.BookingSystem=BookingSystem);