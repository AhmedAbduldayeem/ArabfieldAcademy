class AdvancedAnalytics{constructor(){this.trackingEnabled=!0,this.anonymizeIP=!0,this.respectDNT=!0,this.sessionId=this.generateSessionId(),this.pageStartTime=Date.now(),this.init()}init(){this.shouldTrack()&&(this.trackPageView(),this.setupEventTracking(),this.trackUserEngagement(),this.setupPerformanceTracking())}shouldTrack(){return!(this.respectDNT&&"1"===navigator.doNotTrack)&&this.trackingEnabled}generateSessionId(){return'session_'+Math.random().toString(36).substr(2,9)+'_'+Date.now()}generateUserId(){let t=localStorage.getItem('ara_user_id');return t||(t='user_'+Math.random().toString(36).substr(2,9),localStorage.setItem('ara_user_id',t)),t}trackPageView(){const t={session_id:this.sessionId,user_id:this.generateUserId(),page:window.location.pathname,referrer:document.referrer,timestamp:(new Date).toISOString(),user_agent:navigator.userAgent,viewport:`${window.innerWidth}x${window.innerHeight}`,language:navigator.language};this.sendToAnalytics('page_view',t),console.log('ðŸ“Š Page View:',t)}trackEvent(t,e,a=null,l=null){const n={session_id:this.sessionId,user_id:this.generateUserId(),category:t,action:e,label:a,value:l,timestamp:(new Date).toISOString(),page:window.location.pathname};this.sendToAnalytics('event',n),console.log('ðŸ“Š Event:',n)}trackConversion(t,e=null){const a={session_id:this.sessionId,user_id:this.generateUserId(),goal:t,value:e,timestamp:(new Date).toISOString(),page:window.location.pathname};this.sendToAnalytics('conversion',a),console.log('ðŸ“Š Conversion:',a)}setupEventTracking(){document.addEventListener('click',t=>{const e=t.target.closest('a')||t.target.closest('button');if(e){let t='engagement',a='click',l=e.textContent?.trim()||e.getAttribute('aria-label')||e.className;e.classList.contains('btn-primary')?(t='conversion',a='primary_button_click'):e.classList.contains('btn-secondary')?(t='engagement',a='secondary_button_click'):e.href&&e.href.includes('contact')?(t='conversion',a='contact_click'):e.href&&e.href.includes('programs')&&(t='navigation',a='programs_click'),this.trackEvent(t,a,l)}}),document.addEventListener('submit',t=>{const e=t.target;'trial-form'===e.id?this.trackConversion('free_trial_booking',1):e.classList.contains('contact-form')&&this.trackConversion('contact_form_submission',1)});let t=!1;window.addEventListener('scroll',(()=>{t||((e=(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight))*100)>25&&(this.trackEvent('engagement','scroll_25_percent'),t=!0))}),{passive:!0})}trackUserEngagement(){window.addEventListener('beforeunload',(()=>{const t=Date.now()-this.pageStartTime;this.trackEvent('engagement','time_spent',null,Math.round(t/1e3))}));const t=document.querySelectorAll('video');t.forEach(((t,e)=>{t.addEventListener('play',(()=>{this.trackEvent('media','video_play',`video_${e}`)})),t.addEventListener('pause',(()=>{this.trackEvent('media','video_pause',`video_${e}`)})),t.addEventListener('ended',(()=>{this.trackEvent('media','video_complete',`video_${e}`)}))}))}setupPerformanceTracking(){window.addEventListener('load',(()=>{const t=Date.now()-this.pageStartTime;this.trackEvent('performance','page_load_time',null,t);const e=document.querySelectorAll('img');e.forEach(((t,a)=>{t.complete?this.trackImageLoad(t,a):(t.addEventListener('load',(()=>this.trackImageLoad(t,a))),t.addEventListener('error',(()=>this.trackEvent('performance','image_load_error',t.src))))}))})),'connection'in navigator&&(t=navigator.connection,this.trackEvent('performance','connection_type',t.effectiveType,t.downlink))}trackImageLoad(t,e){const a=Date.now()-this.pageStartTime;this.trackEvent('performance','image_load',`image_${e}`,a)}sendToAnalytics(t,e){'development'===window.ENVIRONMENT&&console.log(`ðŸ“Š Analytics [${t}]:`,e),this.simulateDataSend(t,e)}simulateDataSend(t,e){const a={type:t,data:e,sent_at:(new Date).toISOString()}}getPerformanceReport(){return{session_id:this.sessionId,user_id:this.generateUserId(),page_load_time:Date.now()-this.pageStartTime,pages_visited:JSON.parse(sessionStorage.getItem('visited_pages')||'[]'),screen_resolution:`${screen.width}x${screen.height}`,color_depth:screen.colorDepth,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}}cleanupOldData(){const t=Date.now()-2592e6,e=JSON.parse(sessionStorage.getItem('visited_pages')||'[]'),a=e.filter(e=>e.timestamp>t);sessionStorage.setItem('visited_pages',JSON.stringify(a))}}'undefined'!=typeof window&&(window.AdvancedAnalytics=AdvancedAnalytics,window.analytics=new AdvancedAnalytics);