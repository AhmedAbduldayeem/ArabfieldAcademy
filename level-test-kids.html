<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alphabet Adventure! - Arabfield Academy</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpg" href="images/logo.jpg">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Alphabet Adventure! - Arabfield Academy">
    <meta property="og:description" content="Fun and interactive Arabic alphabet test for kids. Help your child discover the joy of learning Arabic letters through games and sounds.">
    <meta property="og:image" content="https://arabfieldacademy.netlify.app/images/social-preview.jpg">
    <meta property="og:url" content="https://arabfieldacademy.netlify.app/level-test-kids.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Arabfield Academy">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Alphabet Adventure! - Arabfield Academy">
    <meta name="twitter:description" content="Fun and interactive Arabic alphabet test for kids. Help your child discover the joy of learning Arabic letters through games and sounds.">
    <meta name="twitter:image" content="https://arabfieldacademy.netlify.app/images/social-preview.jpg">

    <link rel="stylesheet" href="style.css">
    <style>
        /* --- STYLES FOR THE KIDS ALPHABET TEST --- */
        body {
            background-color: #f0faff; /* Light, friendly background */
        }
        .kids-test-container { max-width: 800px; margin: 0 auto; }
        
        #intro-screen, #results-screen { text-align: center; }
        #intro-screen h2, #results-screen h2 { font-size: 36px; color: #0a4d68; font-family: 'Cairo', sans-serif; }
        #intro-screen p, #results-screen p { font-size: 18px; color: #555; margin-bottom: 30px; }
        #intro-screen .start-icon { font-size: 80px; margin-bottom: 20px; animation: bounce 2s infinite; }

        #test-screen { display: none; }
        
        .progress-bar-container { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; }
        .progress-star { font-size: 30px; color: #e0e0e0; transition: color 0.5s, transform 0.5s; }
        .progress-star.filled { color: #FFC107; transform: scale(1.2); }

        .question-container { margin-bottom: 30px; text-align: center; }
        .question-text { font-size: 28px; color: #0a4d68; margin-bottom: 15px; }
        .listen-icon { font-size: 60px; color: #f57c00; cursor: pointer; transition: transform 0.2s; }
        .listen-icon:hover { transform: scale(1.1); }
        
        .options-grid { list-style: none; padding: 0; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        
        .option-card { background-color: white; border: 3px solid #e0e0e0; border-radius: 15px; padding: 20px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; min-height: 120px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .option-card:hover { transform: translateY(-8px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-color: #f57c00; }
        
        .option-card.letter-card { font-family: 'Cairo', sans-serif; font-size: 70px; font-weight: bold; color: #0a4d68; }
        .option-card.emoji-card { font-size: 70px; }

        .options-grid.disabled .option-card { pointer-events: none; opacity: 0.6; }
        .option-card.correct { border-color: #4CAF50; background-color: #e8f5e9; animation: correct-answer-pop 0.5s; }
        .option-card.incorrect { border-color: #F44336; background-color: #ffebee; animation: wrong-answer-shake 0.5s; }

        .feedback-message { margin-top: 20px; font-size: 24px; font-weight: bold; height: 30px; transition: opacity 0.3s; animation: feedback-appear 0.5s; }

        #results-screen .result-icon { font-size: 100px; animation: bounce 2s infinite; }
        #results-screen .stars { font-size: 40px; color: #FFC107; margin-bottom: 20px; }

        /* Animations */
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-30px);} 60% {transform: translateY(-15px);} }
        @keyframes correct-answer-pop { 0% {transform: scale(1);} 50% {transform: scale(1.1);} 100% {transform: scale(1);} }
        @keyframes wrong-answer-shake { 0%, 100% {transform: translateX(0);} 10%, 30%, 50%, 70%, 90% {transform: translateX(-10px);} 20%, 40%, 60%, 80% {transform: translateX(10px);} }
        @keyframes feedback-appear { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    <script src="app.js" defer></script>
</head>
<body>
    <header class="main-header" id="main-header-placeholder"></header>

    <section class="section">
        <div class="kids-test-container">
            <div id="intro-screen">
                <div class="start-icon">üöÄ</div>
                <h2>Welcome to the Alphabet Adventure!</h2>
                <p>Let's play a fun game to learn the Arabic letters. Are you ready?</p>
                <button id="start-test-btn" class="btn btn-primary">Let's Go!</button>
            </div>

            <div id="test-screen">
                <div class="progress-bar-container" id="progress-bar"></div>
                <div id="question-container"></div>
                <div class="feedback-message" id="feedback-message"></div>
            </div>

            <div id="results-screen">
                <div class="result-icon">üèÜ</div>
                <h2>You are an Alphabet Star!</h2>
                <div class="stars" id="final-stars"></div>
                <p>You did an amazing job learning the letters. Let's continue the fun in a real lesson!</p>
                <!-- THE CHANGE IS HERE: Updated the link -->
                <a href="programs.html#program-kids" class="btn btn-primary" style="margin-top: 20px;">Explore Our Kids Program</a>
            </div>
        </div>
    </section>

    <footer class="main-footer" id="main-footer-placeholder"></footer>
    <div class="fab-container" id="fabs-placeholder"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // --- Elements ---
            const introScreen = document.getElementById('intro-screen');
            const testScreen = document.getElementById('test-screen');
            const resultsScreen = document.getElementById('results-screen');
            const startTestBtn = document.getElementById('start-test-btn');
            const questionContainer = document.getElementById('question-container');
            const progressBar = document.getElementById('progress-bar');
            const feedbackMessage = document.getElementById('feedback-message');
            const finalStars = document.getElementById('final-stars');

            // --- Audio Files ---
            const clickSound = new Audio('sounds/click.mp3');
            const correctSound = new Audio('sounds/clapping.mp3');
            const wrongSound = new Audio('sounds/Wrong.mp3');

            // --- Test Data ---
            let currentQuestionIndex = 0;
            let score = 0;
            const questions = [
                { type: 'sound-to-letter', q: "Where is the letter 'Baa' (ÿ®)?", sound: 'sounds/baa.mp3', options: ['ÿ™', 'ÿ®', 'ŸÜ', 'ÿ´'], a: 'ÿ®' },
                { type: 'letter-to-emoji', q: "Which one starts with 'Alif' (ÿ£   )?", letter: 'ÿ£', options: [{emoji:'ü¶Ü', a:'ÿ®'}, {emoji:'ü¶Å', a:'ÿ£'}], a: 'ÿ£' },
                { type: 'sound-to-letter', q: "Where is the letter 'Taa' (ÿ™)?", sound: 'sounds/taa.mp3', options: ['ÿ¨', 'ÿ≠', 'ÿ™', 'ÿÆ'], a: 'ÿ™' },
                { type: 'letter-to-emoji', q: "Which one starts with 'Jeem' (ÿ¨   )?", letter: 'ÿ¨', options: [{emoji:'üê´', a:'ÿ¨'}, {emoji:'üè†', a:'ÿ®'}], a: 'ÿ¨' },
                { type: 'sound-to-letter', q: "Where is the letter 'Seen' (ÿ≥)?", sound: 'sounds/seen.mp3', options: ['ÿ¥', 'ÿµ', 'ÿ≥', 'ÿ∂'], a: 'ÿ≥' }
            ];
            const correctFeedbacks = ["Awesome! ‚ú®", "You're a star! üåü", "Super smart! üß†", "Wow! Perfect! üéâ", "Ya Batal! (Hero!   ) üí™"];

            // --- Functions ---
            function startTest() {
                clickSound.play();
                introScreen.style.display = 'none';
                testScreen.style.display = 'block';
                resultsScreen.style.display = 'none';
                currentQuestionIndex = 0;
                score = 0;
                updateProgressBar();
                loadQuestion();
            }

            function updateProgressBar() {
                progressBar.innerHTML = '';
                for (let i = 0; i < questions.length; i++) {
                    const star = document.createElement('div');
                    star.className = 'progress-star';
                    if (i < score) {
                        star.classList.add('filled');
                    }
                    progressBar.appendChild(star);
                }
            }

            function loadQuestion() {
                feedbackMessage.textContent = '';
                const q = questions[currentQuestionIndex];
                let optionsHTML = '';

                if (q.type === 'sound-to-letter') {
                    optionsHTML = q.options.map(opt => `<li class="option-card letter-card" data-answer="${opt}">${opt}</li>`).join('');
                    questionContainer.innerHTML = `
                        <div class="question-text">${q.q}</div>
                        <div class="listen-icon" id="listen-btn">üîä</div>
                        <ul class="options-grid">${optionsHTML}</ul>`;
                    document.getElementById('listen-btn').addEventListener('click', () => new Audio(q.sound).play());
                } else if (q.type === 'letter-to-emoji') {
                    optionsHTML = q.options.map(opt => `<li class="option-card emoji-card" data-answer="${opt.a}">${opt.emoji}</li>`).join('');
                    questionContainer.innerHTML = `
                        <div class="question-text">${q.q}</div>
                        <ul class="options-grid">${optionsHTML}</ul>`;
                }
            }

            questionContainer.addEventListener('click', function(e) {
                const card = e.target.closest('.option-card');
                if (card && !card.parentElement.classList.contains('disabled')) {
                    clickSound.play();
                    const grid = card.parentElement;
                    grid.classList.add('disabled');
                    
                    const selectedAnswer = card.dataset.answer;
                    const correctAnswer = questions[currentQuestionIndex].a;
                    const isCorrect = selectedAnswer === correctAnswer;

                    if (isCorrect) {
                        score++;
                        card.classList.add('correct');
                        correctSound.play();
                        feedbackMessage.textContent = correctFeedbacks[Math.floor(Math.random() * correctFeedbacks.length)];
                        feedbackMessage.style.color = '#4CAF50';
                    } else {
                        card.classList.add('incorrect');
                        wrongSound.play();
                        feedbackMessage.textContent = "Oops! Let's try again!";
                        feedbackMessage.style.color = '#F44336';
                        const correctCard = grid.querySelector(`[data-answer="${correctAnswer}"]`);
                        if(correctCard) correctCard.classList.add('correct');
                    }

                    setTimeout(() => {
                        updateProgressBar();
                        currentQuestionIndex++;
                        if (currentQuestionIndex < questions.length) {
                            loadQuestion();
                        } else {
                            showResults();
                        }
                    }, 1500);
                }
            });

            function showResults() {
                testScreen.style.display = 'none';
                resultsScreen.style.display = 'block';
                finalStars.innerHTML = '‚≠ê'.repeat(score) + '‚òÜ'.repeat(questions.length - score);
            }

            startTestBtn.addEventListener('click', startTest);
        });
    </script>
</body>
</html>